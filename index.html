<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>经智AI智能体工作平台</title>
  <!-- 本地 Font Awesome 样式，确保与 assets/webfonts 同级 -->
  <link href="assets/css/all.min.css" rel="stylesheet">
  <!-- 访问统计脚本 -->
  <script src="tracking.js" defer></script>
  <style>
    :root{
      /* 基础颜色系统 */
      --police-blue:#1a3e72;
      --police-light:#4a6fa5;
      --police-dark:#0d1f3a;
      --police-accent:#e74c3c;
      --police-gray:#f5f7fa;
      --police-success:#27ae60;
      --police-warning:#f39c12;
      --police-info:#3498db;
      --police-text-primary:#2c3e50;
      --police-text-secondary:#7f8c8d;
      
      /* 新增高级设计变量 */
      --primary-gradient: linear-gradient(135deg, #1a3e72, #3498db);
      --accent-gradient: linear-gradient(45deg, #e74c3c, #ff7675);
      --dark-gradient: linear-gradient(135deg, #0d1f3a, #2c3e50);
      --card-glow: 0 8px 32px rgba(26, 62, 114, 0.15);
      --glass-effect: rgba(255, 255, 255, 0.85);
      --glass-border: 1px solid rgba(255, 255, 255, 0.18);
      --neumorphic-light: 8px 8px 16px rgba(0, 0, 0, 0.05), -8px -8px 16px rgba(255, 255, 255, 0.8);
      --neumorphic-dark: 8px 8px 16px rgba(0, 0, 0, 0.2), -8px -8px 16px rgba(255, 255, 255, 0.05);
      --transition-standard:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-bounce: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    /* 暗色模式 */
    body.dark-mode {
      --police-blue:#2980b9;
      --police-light:#3498db;
      --police-dark:#1e272e;
      --police-gray:#2f3640;
      --police-text-primary:#ecf0f1;
      --police-text-secondary:#bdc3c7;
      --primary-gradient: linear-gradient(135deg, #2980b9, #3498db);
      --dark-gradient: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      --glass-effect: rgba(15, 32, 39, 0.8);
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364) fixed;
      color: var(--police-text-primary);
    }
    
    body.dark-mode .workflow-card {
      background: rgba(22, 33, 62, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    body.dark-mode .stat-card {
      background: rgba(22, 33, 62, 0.7);
      border-color: rgba(255,255,255,0.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }
    
    body.dark-mode .stat-label {
      color: rgba(255, 255, 255, 0.9);
    }
    
    body.dark-mode .stat-desc {
      color: rgba(255, 255, 255, 0.6);
    }
    
    body.dark-mode .stat-icon {
      color: rgba(255, 255, 255, 0.6);
    }
    
    body.dark-mode .stat-card:nth-child(1) .stat-value {
      background: linear-gradient(135deg, #3498db, #76d0ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    body.dark-mode .stat-card:nth-child(2) .stat-value {
      background: linear-gradient(135deg, #4a6fa5, #7fa7e8);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    body.dark-mode .stat-card:nth-child(3) .stat-value {
      background: linear-gradient(135deg, #e74c3c, #ff7675);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    body.dark-mode .workflow-card:hover {
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), 0 0 20px rgba(52, 152, 219, 0.3);
      border-color: rgba(52, 152, 219, 0.3);
    }
    
    body.dark-mode .card-title {
      color: var(--police-text-primary);
    }
    
    body.dark-mode .card-desc {
      color: var(--police-text-secondary);
    }
    
    body.dark-mode .card-footer {
      background: rgba(0,0,0,0.2);
      border-top: 1px solid rgba(255,255,255,0.05);
    }
    
    body.dark-mode .sidebar {
      background: rgba(22, 33, 62, 0.8);
      border-color: rgba(255,255,255,0.05);
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
    }
    
    body.dark-mode .sidebar-toggle {
      background: rgba(22, 33, 62, 0.9);
      border-color: rgba(255, 255, 255, 0.1);
    }
    
    body.dark-mode .sidebar-toggle:hover {
      background: linear-gradient(135deg, #0f2027, #2980b9);
    }
    
    body.dark-mode .nav-link {
      color: rgba(255, 255, 255, 0.8);
      border-color: transparent;
    }
    
    body.dark-mode .nav-link:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
      border-color: rgba(255, 255, 255, 0.1);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    body.dark-mode .nav-section::after {
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.1) 20%, 
        rgba(255, 255, 255, 0.1) 80%, 
        transparent
      );
    }
    
    body.dark-mode .nav-section-title {
      color: rgba(255, 255, 255, 0.7);
    }
    
    body.dark-mode .nav-link i {
      color: rgba(255, 255, 255, 0.7);
    }
    
    body.dark-mode .nav-link:hover i {
      color: var(--police-info);
    }
    
    body.dark-mode .nav-link.active {
      background: linear-gradient(135deg, #2980b9, #3498db);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    }
    
    /* 导航图标特效 */
    .nav-icon-pulse {
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      pointer-events: none;
      background: radial-gradient(circle, rgba(231, 76, 60, 0.7) 0%, rgba(231, 76, 60, 0) 70%);
      opacity: 0;
      transform: scale(0.5);
      transition: all 0.5s;
      z-index: -1;
    }
    
    .nav-link:hover .nav-icon-pulse {
      opacity: 0.8;
      transform: scale(1.2);
    }
    
    /* 导航提示 */
    .nav-tooltip {
      position: absolute;
      left: 100%;
      top: 50%;
      transform: translateY(-50%);
      background: var(--police-dark);
      color: white;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 0.75rem;
      opacity: 0;
      pointer-events: none;
      transition: all 0.3s;
      white-space: nowrap;
      z-index: 1000;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      margin-left: 15px;
    }
    
    .nav-tooltip::before {
      content: '';
      position: absolute;
      left: -5px;
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 0;
      border-top: 6px solid transparent;
      border-right: 6px solid var(--police-dark);
      border-bottom: 6px solid transparent;
    }
    
    .nav-link:hover .nav-tooltip {
      opacity: 1;
      margin-left: 10px;
    }
    
    body.dark-mode .section-title {
      color: var(--police-light);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Microsoft YaHei',sans-serif;
      background: linear-gradient(135deg, #f5f7fa, #e8eef5);
      color:var(--police-text-primary);
      display:flex;
      flex-direction:column;
      min-height:100vh;
      overflow-x:hidden;
      background-attachment: fixed;
    }
    
    /* 粒子背景效果 */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }
    
    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      pointer-events: none;
    }

    /* 顶部栏 */
    .header{
      background: rgba(13, 31, 58, 0.85);
      color:#fff;
      padding:1.2rem 2rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-shadow:0 10px 30px rgba(0,0,0,.2);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1001;
      height: 70px;
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }  
    .logo{
      display:flex;
      align-items:center;
      position: relative;
      z-index: 2;
    }
    .logo-icon{
      font-size:2rem;
      margin-right:1rem;
      color: #fff;
      text-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
      animation: pulse 2s infinite ease-in-out;
    }
    .title-text{
      font-size:1.5rem;
      font-weight:600;
      letter-spacing:1px;
      background: linear-gradient(to right, #fff, #a1c4fd);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .subtitle{
      font-size:.85rem;
      opacity:.9;
      color: rgba(255,255,255,0.9);
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .header-right {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    .stats-link, .browser-link {
      color: white;
      font-size: 1rem;
      opacity: 0.9;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      text-decoration: none;
      padding: 5px 8px;
      border-radius: 4px;
    }
    .stats-link:hover, .browser-link:hover {
      opacity: 1;
      transform: scale(1.05);
      background: rgba(255, 255, 255, 0.1);
    }
    .stats-link i, .browser-link i {
      margin-right: 5px;
      font-size: 1.1rem;
    }
    
    /* 用户信息和菜单 */
    .user-info {
      position: relative;
      display: flex;
      align-items: center;
    }
    .user-icon {
      display: flex;
      align-items: center;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 24px;
      transition: var(--transition-standard);
      background: rgba(255, 255, 255, 0.05);
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .user-icon:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }
    .user-icon i {
      margin-right: 5px;
    }
    /* 修改用户菜单的CSS，确保正确显示 */
    .user-menu {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      width: 160px;
      display: none;
      z-index: 1002;
      margin-top: 0.5rem;
      overflow: hidden;
    }
    .user-menu.active {
      display: block !important;
    }
    .logout-btn {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      color: var(--police-dark);
      text-decoration: none;
      transition: all 0.2s;
    }
    .logout-btn:hover {
      background: var(--police-gray);
      color: var(--police-accent);
    }
    .logout-btn i {
      margin-right: 8px;
    }

    /* 侧边导航栏 */
    .sidebar {
      position: fixed;
      left: 0;
      top: 70px;
      height: calc(100vh - 70px);
      width: 280px;
      background: rgba(255, 255, 255, 0.85);
      box-shadow: 5px 0 30px rgba(0, 0, 0, 0.1);
      transform: translateX(-250px);
      transition: transform .4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      z-index: 1000;
      overflow-y: auto;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
      border-right: 1px solid rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(12px);
      padding-top: 10px;
    }

    /* 隐藏 Webkit 浏览器的滚动条 */
    .sidebar::-webkit-scrollbar {
      display: none;
    }

    .sidebar:hover,
    .sidebar.active {
      transform: translateX(0);
    }

    .sidebar-toggle {
      position: absolute;
      right: -30px;
      top: 50%;
      transform: translateY(-50%);
      width: 30px;
      height: 60px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 0 12px 12px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 5px 0 15px rgba(0,0,0,.15);
      transition: all 0.3s;
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-left: none;
      z-index: 999;
    }
    
    .sidebar-toggle:hover {
      background: var(--primary-gradient);
      width: 35px;
      right: -35px;
    }
    
    .sidebar-toggle:hover i {
      color: white;
      transform: scale(1.2);
    }
    
    .sidebar-toggle i {
      transition: all 0.3s;
      color: var(--police-blue);
    }

    .nav-menu {
      list-style: none;
      padding: 0.5rem 1rem;
    }

    .nav-item {
      margin-bottom: 0.6rem;
      position: relative;
    }

    .nav-link {
      display: flex;
      align-items: center;
      padding: 0.9rem 1.2rem;
      color: var(--police-text-primary);
      text-decoration: none;
      border-radius: 10px;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      margin-bottom: 2px;
      position: relative;
      overflow: hidden;
      font-weight: 500;
      box-shadow: 0 1px 3px rgba(0,0,0,0.02);
      border: 1px solid transparent;
    }

    .nav-link:hover {
      background: rgba(255, 255, 255, 0.8);
      color: var(--police-blue);
      transform: translateX(5px);
      border: 1px solid rgba(255, 255, 255, 0.8);
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    
    .nav-link::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 0;
      background: var(--primary-gradient);
      opacity: 0.1;
      transition: all 0.3s ease-out;
      border-radius: 0 5px 5px 0;
    }
    
    .nav-link:hover::before {
      width: 5px;
    }

    .nav-link i {
      margin-right: 1rem;
      width: 22px;
      height: 22px;
      font-size: 1.1rem;
      text-align: center;
      transition: all 0.3s;
      color: var(--police-blue);
    }
    
    .nav-link:hover i {
      transform: scale(1.2);
      color: var(--police-accent);
    }
    
    .nav-link.active {
      background: var(--primary-gradient);
      color: white;
      box-shadow: 0 5px 15px rgba(26, 62, 114, 0.2);
      transform: translateX(5px);
    }
    
    .nav-link.active i {
      color: white;
    }
    
    .nav-link.active::before {
      width: 0;
    }

    .nav-section {
      margin-bottom: 1.8rem;
      position: relative;
    }
    
    .nav-section::after {
      content: '';
      position: absolute;
      bottom: -0.9rem;
      left: 50%;
      transform: translateX(-50%);
      width: 70%;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(0, 0, 0, 0.05) 20%, 
        rgba(0, 0, 0, 0.05) 80%, 
        transparent
      );
    }
    
    .nav-section:last-child::after {
      display: none;
    }

    .nav-section-title {
      padding: 0.5rem 1.5rem;
      margin: 1rem 0 .5rem;
      font-size: 0.85rem;
      color: var(--police-blue);
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: 700;
      display: flex;
      align-items: center;
      position: relative;
    }
    
    .nav-section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 16px;
      background: var(--police-accent);
      border-radius: 0 2px 2px 0;
    }

    /* 主区域 */
    .main-content {
      flex: 1;
      padding: 2rem;
      margin: 70px auto 0;
      max-width: 1400px;
      width: 100%;
      transition: margin .3s ease;
    }

    .main-content.sidebar-visible {
      margin-left: 250px;
    }

    /* 模块分类 */
    .module-section {
      margin-bottom: 2.5rem;
    }
    .section-title {
      font-size: 1.3rem;
      color: var(--police-blue);
      margin-bottom: 1.5rem;
      padding-left: 1rem;
      border-left: 4px solid var(--police-accent);
    }
    
    .workflow-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.2rem;
      justify-content: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* 卡片样式 */
    .workflow-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      box-shadow: var(--card-glow);
      transition: var(--transition-bounce);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      position: relative;
      z-index: 1;
      border: var(--glass-border);
      backdrop-filter: blur(5px);
    }

    .workflow-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(26,62,114,0.05), rgba(74,111,165,0.05));
      opacity: 0;
      transition: opacity .4s ease;
      z-index: -1;
    }

    .workflow-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 20px 40px rgba(26, 62, 114, 0.15);
    }

    .workflow-card:hover::before {
      opacity: 1;
    }

    .workflow-card:hover .card-icon {
      transform: scale(1.1) rotate(5deg);
      color: var(--police-accent);
    }

    .workflow-card:hover .header-title {
      transform: translateX(5px);
    }

    .workflow-card:hover .badge {
      transform: scale(1.1);
      background: var(--police-blue);
    }

    .card-header {
      background: linear-gradient(135deg,var(--police-blue),var(--police-light));
      color: #fff;
      padding: 1.2rem 1.4rem;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      position: relative;
      overflow: hidden;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    /* 为不同类型的卡片添加不同颜色 */
    .workflow-card[id^="general"] .card-header {
      background: linear-gradient(135deg, var(--police-blue), var(--police-light));
    }
    
    .workflow-card[id^="finance"] .card-header,
    .workflow-card[id^="securities"] .card-header,
    .workflow-card[id^="tax"] .card-header,
    .workflow-card[id^="trade"] .card-header,
    .workflow-card[id^="money"] .card-header {
      background: linear-gradient(135deg, #2c3e50, #4a6fa5);
    }
    
    .workflow-card[id^="doc-writing"] .card-header,
    .workflow-card[id^="case-guide"] .card-header {
      background: linear-gradient(135deg, #16a085, #2980b9);
    }
    
    .workflow-card[id^="evidence"] .card-header,
    .workflow-card[id^="data"] .card-header,
    .workflow-card[id^="police-data"] .card-header,
    .workflow-card[id^="person"] .card-header {
      background: linear-gradient(135deg, #c0392b, #e74c3c);
    }

    .card-header::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 60%);
      opacity: 0;
      transform: scale(0.5);
      transition: all .5s ease;
    }

    .workflow-card:hover .card-header::after {
      opacity: 1;
      transform: scale(1);
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 700;
      line-height: 1.25;
      transition: transform .3s ease;
    }

    .header-sub {
      font-size: .85rem;
      opacity: .9;
      margin-top: .2rem;
      line-height: 1;
    }

    .card-body {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      text-align: center;
      gap: .8rem;
      position: relative;
      z-index: 2;
    }

    .card-icon {
      font-size: 2.8rem;
      color: var(--police-blue);
      margin-bottom: .5rem;
      transition: all .4s cubic-bezier(0.4, 0, 0.2, 1);
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
      position: relative;
    }
    
    .card-icon i {
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      will-change: transform;
    }
    
    .workflow-card:hover .card-icon i {
      transform: scale(1.15) translateY(-5px);
      filter: drop-shadow(0 10px 12px rgba(0,0,0,0.15));
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--police-dark);
      transition: all 0.4s ease;
      position: relative;
      display: inline-block;
    }

    .workflow-card:hover .card-title {
      color: var(--police-blue);
      transform: translateY(-2px);
      text-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .card-title::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 50%;
      width: 0;
      height: 2px;
      background: var(--police-blue);
      transform: translateX(-50%);
      transition: width 0.4s ease;
      border-radius: 2px;
    }
    
    .workflow-card:hover .card-title::after {
      width: 70%;
    }

    .card-desc {
      font-size: .95rem;
      color: #666;
      line-height: 1.5;
      transition: color .3s ease;
    }

    .workflow-card:hover .card-desc {
      color: #444;
    }

    .card-footer {
      padding: 1rem 1.2rem;
      font-size: .9rem;
      background: rgba(0,0,0,.02);
      border-top: 1px solid rgba(0,0,0,.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color .3s ease;
    }

    .workflow-card:hover .card-footer {
      background: rgba(0,0,0,.03);
    }

    .badge {
      background: var(--police-accent);
      color: #fff;
      padding: .35rem .9rem;
      border-radius: 20px;
      font-size: .75rem;
      font-weight: 600;
      letter-spacing: .5px;
      transition: var(--transition-standard);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* 为不同类型的徽章添加不同颜色 */
    .workflow-card[id^="general"] .badge {
      background: var(--police-blue);
    }
    
    .workflow-card[id^="finance"] .badge,
    .workflow-card[id^="securities"] .badge,
    .workflow-card[id^="tax"] .badge,
    .workflow-card[id^="trade"] .badge,
    .workflow-card[id^="money"] .badge {
      background: var(--police-dark);
    }
    
    .workflow-card[id^="doc-writing"] .badge,
    .workflow-card[id^="case-guide"] .badge {
      background: var(--police-info);
    }
    
    .workflow-card[id^="evidence"] .badge,
    .workflow-card[id^="data"] .badge,
    .workflow-card[id^="police-data"] .badge,
    .workflow-card[id^="person"] .badge {
      background: var(--police-accent);
    }

    /* 移除原来的footer样式，使用下方新添加的样式 */

    .fade-in {
      opacity: 0;
      animation: fadeIn .5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }  
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
        filter: blur(2px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
        filter: blur(0);
      }
    }
    
    /* 添加页面加载时的骨架屏效果 */
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite;
      border-radius: 4px;
    }
    
    @keyframes skeleton-loading {
      0% {
        background-position: 200% 0;
      }
      100% {
        background-position: -200% 0;
      }
    }
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

          /* 修改user-icon中的样式，添加更多间隔 */
    .user-icon i:last-child {
      margin-left: 6px;
    }
    
    /* 暗色模式切换按钮 */
    .theme-toggle {
      cursor: pointer;
      margin-right: 1rem;
      padding: 0.5rem;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-standard);
    }
    
    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: rotate(30deg);
    }

    @media (max-width: 768px) {
      .header {
        padding: 1rem;
      }
      .title-text {
        font-size: 1.2rem;
      }
      .subtitle {
        display: none;
      }
      .sidebar {
        transform: translateX(-250px);
      }
      .main-content {
        margin: 70px 0 0;
        padding: 1rem;
      }
      .main-content.sidebar-visible {
        margin-left: 0;
      }
      .workflow-cards {
        grid-template-columns: 1fr;
      }
      .user-info {
        font-size: 0.85rem;
      }
      .link-text {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- 粒子背景 -->
  <div class="particles" id="particles"></div>
  
  <!-- 顶栏 -->
  <header class="header">
    <div class="logo"><i class="fa-solid fa-shield-halved logo-icon"></i>
      <div><div class="title-text">经智AI智能体工作平台</div><div class="subtitle">Guiyang Economic Crime AI Platform</div></div>
    </div>
    <div class="header-right">
      <a href="stats.html" class="stats-link" title="访问统计"><i class="fa-solid fa-chart-column"></i> <span class="link-text">访问统计</span></a>
      <a href="chrome-installer.html" class="browser-link" title="安装浏览器插件"><i class="fa-brands fa-chrome"></i> <span class="link-text">浏览器插件</span></a>
      <div class="theme-toggle" id="themeToggle" title="切换主题">
        <i class="fa-solid fa-moon"></i>
      </div>
      <div class="user-info">
        <span class="user-icon" id="userMenuToggle"><i class="fa-solid fa-user-shield"></i> <span id="user-id">用户：</span> <i class="fa-solid fa-caret-down"></i></span>
        <div class="user-menu" id="userMenu">
          <a href="#" class="menu-item"><i class="fa-solid fa-user-gear"></i> 个人设置</a>
          <a href="#" class="menu-item"><i class="fa-solid fa-bell"></i> 消息通知</a>
          <a href="login.html" class="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> 退出系统</a>
        </div>
      </div>
    </div>
    
    <style>
      .menu-item {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        color: var(--police-text-primary);
        text-decoration: none;
        transition: all 0.2s;
        border-bottom: 1px solid rgba(0,0,0,0.05);
      }
      .menu-item:hover {
        background: var(--police-gray);
      }
      .menu-item i {
        margin-right: 8px;
        color: var(--police-blue);
      }
    </style>
  </header>

  <!-- 侧边导航栏 -->
  <nav class="sidebar">
    <div class="sidebar-toggle">
      <i class="fa-solid fa-chevron-right"></i>
    </div>
    <div class="nav-section">
      <div class="nav-section-title">通用功能</div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="general-ai.html" class="nav-link">
            <i class="fa-solid fa-robot"></i>
            <div class="nav-icon-pulse"></div>
            通用AI助手
            <span class="nav-tooltip">智能对话与决策支持</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="general-case.html" class="nav-link">
            <i class="fa-solid fa-magnifying-glass-chart"></i>
            通用案件研判
          </a>
        </li>
        <li class="nav-item">
          <a href="doc-writing.html" class="nav-link">
            <i class="fa-solid fa-pen-fancy"></i>
            公文写作助手
          </a>
        </li>
      </ul>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">专业领域</div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="finance-case.html" class="nav-link">
            <i class="fa-solid fa-landmark"></i>
            金融领域
          </a>
        </li>
        <li class="nav-item">
          <a href="securities-case.html" class="nav-link">
            <i class="fa-solid fa-chart-simple"></i>
            证券领域
          </a>
        </li>
        <li class="nav-item">
          <a href="tax-case.html" class="nav-link">
            <i class="fa-solid fa-receipt"></i>
            涉税领域
          </a>
        </li>
        <li class="nav-item">
          <a href="trade-case.html" class="nav-link">
            <i class="fa-solid fa-store"></i>
            商贸领域
          </a>
        </li>
        <li class="nav-item">
          <a href="money-laundering.html" class="nav-link">
            <i class="fa-solid fa-money-bill-transfer"></i>
            反洗钱领域
          </a>
        </li>
      </ul>
    </div>


    <div class="nav-section">
      <div class="nav-section-title">辅助工具</div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="evidence-analysis.html" class="nav-link">
            <i class="fa-solid fa-scale-balanced"></i>
            金析为证
          </a>
        </li>
        <li class="nav-item">
          <a href="case-guide.html" class="nav-link">
            <i class="fa-solid fa-compass"></i>
            办案指引
          </a>
        </li>
        <li class="nav-item">
          <a href="data-analysis.html" class="nav-link">
            <i class="fa-solid fa-chart-pie"></i>
            数据分析
          </a>
        </li>
      </ul>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">研判工具</div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="person-info-analysis.html" class="nav-link">
            <i class="fa-solid fa-user"></i>
            人员基础信息分析
          </a>
        </li>
        <li class="nav-item">
          <a href="police-data-analysis.html" class="nav-link">
            <i class="fa-solid fa-chart-line"></i>
            警情数据分析
          </a>
        </li>
      </ul>
    </div>

  </nav>

  <!-- 主体 -->
  <main class="main-content">
    <div class="dashboard-header">
      <div>
        <h1 class="dashboard-title fade-in">智能工作平台</h1>
        <p class="dashboard-subtitle fade-in" style="animation-delay:.1s">欢迎使用经智AI智能体工作平台，请选择您需要的功能模块</p>
      </div>
      <div class="dashboard-stats fade-in" style="animation-delay:.2s">
        <div class="stat-card">
          <div class="stat-icon"><i class="fa-solid fa-robot"></i></div>
          <div class="stat-value">8</div>
          <div class="stat-label">AI模型数量</div>
          <div class="stat-desc">可用的智能模型</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fa-solid fa-shield-halved"></i></div>
          <div class="stat-value">12</div>
          <div class="stat-label">专业功能</div>
          <div class="stat-desc">各类案件分析工具</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fa-solid fa-book"></i></div>
          <div class="stat-value">313</div>
          <div class="stat-label">知识库文档</div>
          <div class="stat-desc">经侦专业知识</div>
        </div>
      </div>
    </div>
    
    <style>
      .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        gap: 1.5rem;
      }
      
      .dashboard-title {
        font-size: 1.8rem;
        color: var(--police-dark);
        margin-bottom: 0.5rem;
        font-weight: 600;
      }
      
      .dashboard-subtitle {
        color: var(--police-text-secondary);
        font-size: 1rem;
        max-width: 600px;
      }
      
      .dashboard-stats {
        display: flex;
        gap: 1rem;
      }
      
      .stat-card {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 16px;
        padding: 1.2rem 1.5rem 1.4rem;
        min-width: 150px;
        box-shadow: var(--neumorphic-light);
        text-align: center;
        border: var(--glass-border);
        transition: var(--transition-bounce);
        backdrop-filter: blur(5px);
        position: relative;
        overflow: hidden;
      }
      
      .stat-icon {
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 1.2rem;
        opacity: 0.5;
        color: var(--police-blue);
        transition: all 0.3s;
      }
      
      .stat-card:hover .stat-icon {
        transform: scale(1.2) rotate(10deg);
        opacity: 0.8;
      }
      
      .stat-card:nth-child(1) .stat-icon {
        color: #3498db;
      }
      
      .stat-card:nth-child(2) .stat-icon {
        color: #4a6fa5;
      }
      
      .stat-card:nth-child(3) .stat-icon {
        color: #e74c3c;
      }
      
      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      }
      
      .stat-card::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
        opacity: 0;
        transform: scale(1.5);
        transition: all 0.5s ease;
        pointer-events: none;
      }
      
      .stat-card:hover::after {
        opacity: 1;
        transform: scale(1);
      }
      
      .stat-value {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 0.4rem;
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 2px 10px rgba(26, 62, 114, 0.08);
      }
      
      .stat-card:nth-child(1) .stat-value {
        background: linear-gradient(135deg, #1a3e72, #3498db);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      
      .stat-card:nth-child(2) .stat-value {
        background: linear-gradient(135deg, #2c3e50, #4a6fa5);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      
      .stat-card:nth-child(3) .stat-value {
        background: linear-gradient(135deg, #c0392b, #e74c3c);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      
      .stat-label {
        font-size: 0.9rem;
        color: var(--police-text-primary);
        font-weight: 600;
        margin-bottom: 3px;
      }
      
      .stat-desc {
        font-size: 0.75rem;
        color: var(--police-text-secondary);
        opacity: 0.8;
      }
      
      @media (max-width: 768px) {
        .dashboard-header {
          flex-direction: column;
        }
        
        .dashboard-stats {
          width: 100%;
          justify-content: space-between;
        }
        
        .stat-card {
          flex: 1;
          min-width: 90px;
          padding: 0.8rem 1rem;
        }
        
        .stat-value {
          font-size: 1.4rem;
        }
      }
    </style>

    <!-- 通用AI模块 -->
    <div class="module-section">
      <h2 class="section-title fade-in">通用AI模块</h2>
      <div class="workflow-cards">
        <div class="workflow-card fade-in" id="general-ai-card">
          <div class="card-header"><div class="header-title">通用AI助手</div><div class="header-sub">General AI Assistant</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-robot"></i></div><div class="card-title">智能对话系统</div><div class="card-desc">提供全方位的智能问答和辅助决策支持</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-comments"></i> 实时对话</span><span class="badge">AI</span></div>
        </div>
      </div>
    </div>

    <!-- 案件侦办模块 -->
    <div class="module-section">
      <h2 class="section-title fade-in">案件侦办模块</h2>
      <div class="workflow-cards">
        <div class="workflow-card fade-in" id="general-case-card">
          <div class="card-header"><div class="header-title">通用领域案件研判</div><div class="header-sub">General Case Analysis</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-magnifying-glass-chart"></i></div><div class="card-title">案件研判</div><div class="card-desc">通用领域案件分析与研判系统</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-chart-line"></i> 研判分析</span><span class="badge">通用</span></div>
        </div>

        <div class="workflow-card fade-in" id="finance-case-card">
          <div class="card-header"><div class="header-title">金融领域</div><div class="header-sub">Financial Crime</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-landmark"></i></div><div class="card-title">金融犯罪侦查</div><div class="card-desc">专注金融领域犯罪案件侦办</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-money-bill-trend-up"></i> 金融案件</span><span class="badge">专业</span></div>
        </div>

        <div class="workflow-card fade-in" id="securities-case-card">
          <div class="card-header"><div class="header-title">证券领域</div><div class="header-sub">Securities Crime</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-chart-simple"></i></div><div class="card-title">证券犯罪侦查</div><div class="card-desc">证券市场违法犯罪案件处理</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-building-columns"></i> 证券案件</span><span class="badge">专业</span></div>
        </div>

        <div class="workflow-card fade-in" id="tax-case-card">
          <div class="card-header"><div class="header-title">涉税领域</div><div class="header-sub">Tax Crime</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-receipt"></i></div><div class="card-title">涉税犯罪侦查</div><div class="card-desc">税务违法犯罪案件处理</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-file-invoice-dollar"></i> 税务案件</span><span class="badge">专业</span></div>
        </div>

        <div class="workflow-card fade-in" id="trade-case-card">
          <div class="card-header"><div class="header-title">商贸领域</div><div class="header-sub">Trade Crime</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-store"></i></div><div class="card-title">商贸犯罪侦查</div><div class="card-desc">商业贸易违法犯罪案件处理</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-shop"></i> 商贸案件</span><span class="badge">专业</span></div>
        </div>

        <div class="workflow-card fade-in" id="money-laundering-card">
          <div class="card-header"><div class="header-title">反洗钱领域</div><div class="header-sub">Anti Money Laundering</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-money-bill-transfer"></i></div><div class="card-title">洗钱犯罪侦查</div><div class="card-desc">洗钱犯罪案件侦办与预防</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-money-bill-wheat"></i> 反洗钱</span><span class="badge">专业</span></div>
        </div>
      </div>
    </div>

    <!-- 基础模块 -->
    <div class="module-section">
      <h2 class="section-title fade-in">基础模块</h2>
      <div class="workflow-cards">
        <div class="workflow-card fade-in" id="doc-writing-card">
          <div class="card-header"><div class="header-title">公安公文写作</div><div class="header-sub">Police Document Writing</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-pen-fancy"></i></div><div class="card-title">智能公文助手</div><div class="card-desc">提供模板、规范与自动润色的写作工具</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-file-lines"></i> 公文写作</span><span class="badge">基础</span></div>
        </div>
      </div>
    </div>

    <!-- 专属领域 -->
    <div class="module-section">
      <h2 class="section-title fade-in">专属领域</h2>
      <div class="workflow-cards">
        <div class="workflow-card fade-in" id="evidence-analysis-card">
          <div class="card-header"><div class="header-title">金析为证</div><div class="header-sub">Evidence Analysis</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-scale-balanced"></i></div><div class="card-title">证据分析系统</div><div class="card-desc">专业的证据分析与评估工具</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-gavel"></i> 证据分析</span><span class="badge">专业</span></div>
        </div>

        <div class="workflow-card fade-in" id="case-guide-card">
          <div class="card-header"><div class="header-title">办案指引</div><div class="header-sub">Case Guidance</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-compass"></i></div><div class="card-title">办案指南</div><div class="card-desc">标准化办案流程与指导</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-list-check"></i> 流程指导</span><span class="badge">专业</span></div>
        </div>

        <div class="workflow-card fade-in" id="data-analysis-card">
          <div class="card-header"><div class="header-title">数据分析</div><div class="header-sub">Data Analysis</div></div>
          <div class="card-body"><div class="card-icon"><i class="fa-solid fa-chart-pie"></i></div><div class="card-title">数据分析平台</div><div class="card-desc">深度数据挖掘与可视化分析</div></div>
          <div class="card-footer"><span><i class="fa-solid fa-database"></i> 数据分析</span><span class="badge">专业</span></div>
        </div>
      </div>
    </div>

    <!-- 研判工具 -->
    <div class="module-section">
      <h2 class="section-title fade-in">研判工具</h2>
      <div class="workflow-cards">
        <div class="workflow-card fade-in" id="person-info-analysis-card">
          <div class="card-header">
            <div class="header-title">人员基础信息分析</div>
            <div class="header-sub">Person Info Analysis</div>
          </div>
          <div class="card-body">
            <div class="card-icon"><i class="fa-solid fa-user"></i></div>
            <div class="card-title">人员基础信息分析</div>
            <div class="card-desc">嫌疑人基础信息综合分析研判</div>
          </div>
          <div class="card-footer">
            <span><i class="fa-solid fa-user"></i> 人员分析</span>
            <span class="badge">专业</span>
          </div>
        </div>

        <div class="workflow-card fade-in" id="police-data-analysis-card">
          <div class="card-header">
            <div class="header-title">警情数据分析</div>
            <div class="header-sub">Police Data Analysis</div>
          </div>
          <div class="card-body">
            <div class="card-icon"><i class="fa-solid fa-chart-line"></i></div>
            <div class="card-title">警情数据分析</div>
            <div class="card-desc">警情数据统计分析及趋势研判</div>
          </div>
          <div class="card-footer">
            <span><i class="fa-solid fa-chart-line"></i> 数据分析</span>
            <span class="badge">专业</span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo">
        <i class="fa-solid fa-shield-halved"></i>
        <span>贵阳经侦AI智能体工作平台</span>
      </div>
      <div class="footer-info">© 2025 贵阳市公安局经侦支队 | 技术支持：何国钦工作室</div>
    </div>
  </footer>
  
  <style>
    .footer {
      background: rgba(13, 31, 58, 0.85);
      color: rgba(255,255,255,.8);
      padding: 1.5rem 2rem;
      margin-top: auto;
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .footer-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    
    .footer-logo {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: rgba(255,255,255,0.9);
    }
    
    .footer-logo i {
      font-size: 16px;
      color: var(--police-accent);
    }
    
    .footer-info {
      font-size: 12px;
      opacity: 0.8;
    }
    
    @media (max-width: 768px) {
      .footer {
        padding: 1rem;
      }
    }
  </style>

  <!-- 脚本 -->
  <script>
    // 解析URL参数获取警号
    function getUrlParams() {
      const params = {};
      const queryString = window.location.search.substring(1);
      const pairs = queryString.split('&');
      
      for (let i = 0; i < pairs.length; i++) {
        const pair = pairs[i].split('=');
        const key = decodeURIComponent(pair[0]);
        
        // 判断是否为警号参数
        if (key === 'policeid') {
          params[key] = decodeURIComponent(pair[1] || '');
        }
      }
      
      return params;
    }

    // 设置用户ID显示
    function setUserInfo() {
      const params = getUrlParams();
      const userIdElement = document.getElementById('user-id');
      
      if (params.policeid) {
        userIdElement.textContent = `用户：${params.policeid}`;
      } else {
        userIdElement.textContent = '用户';
      }
    }

    // 页面加载完成后执行
    document.addEventListener('DOMContentLoaded', function() {
      // 设置用户信息
      setUserInfo();
      
      // 用户菜单切换 - 修复这部分代码
      const userMenuToggle = document.getElementById('userMenuToggle');
      const userMenu = document.getElementById('userMenu');
      
      if (userMenuToggle && userMenu) {        
        userMenuToggle.addEventListener('click', function(e) {
          e.stopPropagation();
          userMenu.classList.toggle('active');
        });
        
        // 点击页面其他区域关闭菜单
        document.addEventListener('click', function() {
          userMenu.classList.remove('active');
        });
        
        // 阻止菜单内点击事件冒泡
        userMenu.addEventListener('click', function(e) {
          e.stopPropagation();
        });
      }
      
      // 主题切换功能
      const themeToggle = document.getElementById('themeToggle');
      if (themeToggle) {
        themeToggle.addEventListener('click', function() {
          document.body.classList.toggle('dark-mode');
          
          // 切换图标
          const icon = themeToggle.querySelector('i');
          if (document.body.classList.contains('dark-mode')) {
            icon.className = 'fa-solid fa-sun';
          } else {
            icon.className = 'fa-solid fa-moon';
          }
          
          // 保存用户偏好到localStorage
          localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        });
        
        // 从localStorage加载主题偏好
        if (localStorage.getItem('darkMode') === 'true') {
          document.body.classList.add('dark-mode');
          themeToggle.querySelector('i').className = 'fa-solid fa-sun';
        }
      }

    // 初始化模块访问统计
    function initModuleStats() {
      // 从localStorage获取或初始化统计数据
      let moduleStats = localStorage.getItem('moduleVisitStats');
      moduleStats = moduleStats ? JSON.parse(moduleStats) : {};
      return moduleStats;
    }

    // 记录模块访问
    function recordModuleVisit(moduleId) {
      const stats = initModuleStats();
      
      // 初始化或更新模块的访问统计
      if (!stats[moduleId]) {
        stats[moduleId] = {
          visits: 0,
          active: 0,
          lastVisit: Date.now()
        };
      }
      
      // 增加访问次数
      stats[moduleId].visits++;
      stats[moduleId].lastVisit = Date.now();
      
      // 保存回localStorage
      localStorage.setItem('moduleVisitStats', JSON.stringify(stats));
    }

    // 记录活跃度（在页面停留时间超过10秒）
    function recordModuleActive(moduleId) {
      const stats = initModuleStats();
      
      if (stats[moduleId]) {
        stats[moduleId].active++;
        localStorage.setItem('moduleVisitStats', JSON.stringify(stats));
      }
    }

    // 侧边栏交互
    const sidebar = document.querySelector('.sidebar');
    const mainContent = document.querySelector('.main-content');
    const sidebarToggle = document.querySelector('.sidebar-toggle');
    let isSidebarVisible = false;

    function toggleSidebar() {
      isSidebarVisible = !isSidebarVisible;
      sidebar.style.transform = isSidebarVisible ? 'translateX(0)' : 'translateX(-220px)';
      sidebar.classList.toggle('active', isSidebarVisible);
      mainContent.classList.toggle('sidebar-visible', isSidebarVisible);
      sidebarToggle.querySelector('i').className = isSidebarVisible ? 
        'fa-solid fa-chevron-left' : 'fa-solid fa-chevron-right';
    }

    sidebarToggle.addEventListener('click', toggleSidebar);

    function showLoading(){
      if(document.getElementById('cover')) return;
      const cover=document.createElement('div');
      cover.id='cover';
      cover.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,.85);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:999;backdrop-filter:blur(3px);';
      
      // 创建品牌相关的加载指示器
      const loaderContainer = document.createElement('div');
      loaderContainer.style.cssText='display:flex;flex-direction:column;align-items:center;';
      
      const spinner=document.createElement('div');
      spinner.style.cssText='width:52px;height:52px;border:4px solid var(--police-blue);border-top-color:var(--police-accent);border-radius:50%;animation:spin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;box-shadow:0 4px 12px rgba(0,0,0,0.1);';
      
      const loadingText = document.createElement('div');
      loadingText.textContent = '正在加载...';
      loadingText.style.cssText='margin-top:16px;color:var(--police-blue);font-size:14px;font-weight:500;';
      
      loaderContainer.appendChild(spinner);
      loaderContainer.appendChild(loadingText);
      cover.appendChild(loaderContainer);
      document.body.appendChild(cover);
    }

    function navigate(url, moduleId){
      showLoading();
      
      // 记录模块访问
      if (moduleId) {
        recordModuleVisit(moduleId);
        
        // 设置定时器记录活跃度（如果用户在页面停留超过10秒）
        setTimeout(() => {
          recordModuleActive(moduleId);
        }, 10000);
      }
        
        // 保持URL参数
        const params = getUrlParams();
        if (params.policeid) {
          const separator = url.includes('?') ? '&' : '?';
          url = `${url}${separator}policeid=${params.policeid}`;
        }
      
      setTimeout(() => location.href = url, 300);
    }

    // 为所有卡片添加点击事件
    document.querySelectorAll('.workflow-card').forEach(card => {
      card.addEventListener('click', () => {
        const id = card.id;
        let url = '';
        let moduleId = id.replace('-card', '');
        
        // 根据卡片ID决定跳转地址
        switch(id) {
          case 'doc-writing-card':
            url = 'doc-writing.html';
            break;
          // 其他卡片的跳转逻辑可以在这里添加
          default:
            url = id.replace('-card', '.html');
        }
        
        navigate(url, moduleId);
      });
    });

    // 为导航链接添加点击事件
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const href = link.getAttribute('href');
        const moduleId = href.replace('.html', '');
        navigate(href, moduleId);
      });
    });

    // 点击主内容区域时关闭侧边栏
    mainContent.addEventListener('click', () => {
      if (isSidebarVisible) {
        toggleSidebar();
      }
    });
    
    // 创建粒子背景效果
    function createParticles() {
      const particles = document.getElementById('particles');
      const particleCount = 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 5 + 1;
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        const opacity = Math.random() * 0.5 + 0.1;
        const animDuration = Math.random() * 30 + 10;
        
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}%`;
        particle.style.top = `${posY}%`;
        particle.style.opacity = opacity;
        particle.style.animation = `float ${animDuration}s infinite ease-in-out`;
        
        particles.appendChild(particle);
      }
    }
    
    // 创建浮动动画样式
    function createFloatAnimation() {
      const style = document.createElement('style');
      style.innerHTML = `
        @keyframes float {
          0% { transform: translate(0, 0) rotate(0deg); }
          25% { transform: translate(5px, 10px) rotate(5deg); }
          50% { transform: translate(10px, 5px) rotate(0deg); }
          75% { transform: translate(5px, -5px) rotate(-5deg); }
          100% { transform: translate(0, 0) rotate(0deg); }
        }
      `;
      document.head.appendChild(style);
    }
    
    // 设置当前活动导航链接
    function setActiveNavLink() {
      const currentPath = window.location.pathname;
      const filename = currentPath.split('/').pop();
      
      // 查找匹配当前页面的导航链接
      const navLinks = document.querySelectorAll('.nav-link');
      navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href === filename || 
            (filename === 'index.html' && href === '') || 
            (filename === '' && href === 'index.html')) {
          link.classList.add('active');
        }
      });
    }
    
    // 导航图标动画效果
    function setupNavAnimations() {
      const navLinks = document.querySelectorAll('.nav-link');
      
      navLinks.forEach(link => {
        // 如果还没有添加脉动元素，则添加
        if (!link.querySelector('.nav-icon-pulse')) {
          const pulse = document.createElement('div');
          pulse.className = 'nav-icon-pulse';
          link.insertBefore(pulse, link.firstChild.nextSibling);
        }
        
        // 如果还没有添加提示元素，则添加
        if (!link.querySelector('.nav-tooltip')) {
          const tooltip = document.createElement('span');
          tooltip.className = 'nav-tooltip';
          tooltip.textContent = link.textContent.trim();
          link.appendChild(tooltip);
        }
        
        // 设置图标脉动位置
        const icon = link.querySelector('i');
        const pulse = link.querySelector('.nav-icon-pulse');
        
        if (icon && pulse) {
          // 获取图标位置
          const updatePulsePosition = () => {
            const iconRect = icon.getBoundingClientRect();
            const linkRect = link.getBoundingClientRect();
            
            // 计算相对于链接的位置
            const left = iconRect.left - linkRect.left + iconRect.width / 2 - pulse.offsetWidth / 2;
            const top = iconRect.top - linkRect.top + iconRect.height / 2 - pulse.offsetHeight / 2;
            
            pulse.style.left = `${left}px`;
            pulse.style.top = `${top}px`;
          };
          
          // 初始化位置
          updatePulsePosition();
          
          // 窗口调整时更新位置
          window.addEventListener('resize', updatePulsePosition);
        }
      });
    }
    
    createFloatAnimation();
    createParticles();
    setActiveNavLink();
    setupNavAnimations();
    });
  </script>
</body>
</html>